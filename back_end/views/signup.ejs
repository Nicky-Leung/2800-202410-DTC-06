<%- include ('templates/header') %>



  <body onload="generate()">
    <div class="container d-flex justify-content-center align-items-center mt-5">
      <div class="card border border-dark">
        <div class="card-body">
          <h1 class="card-title text-center">Sign-up</h1>
          <!-- user signs up with name email and password-->
          <form action="/signup" method="post">

            <div class="mb-3">
              <input type="text" name="name" placeholder="Name" class="form-control" />
            </div>

            <div class="mb-3">
              <input type="email" name="email" placeholder="Email" class="form-control" />
            </div>

            <div class="mb-3">
              <input type="password" name="password" placeholder="Password" class="form-control" />
            </div>

            <div id="captcha">

              <div id="user-input" class="inline">
                <input type="text" id="submit-captcha" placeholder="Captcha code" />
              </div>

              <div class="inline" onclick="generate()">
                <i class="fas fa-sync"></i>
              </div>

              <div id="image" class="inline" selectable="False">
              </div>

              <!-- <input type="submit" id="btn" onclick="printmsg()" /> -->

              <p id="key"></p>
            </div>

            <form onsubmit="event.preventDeafault(); printmsg(); this.submit();">
              <input type="submit" value="submit" />
            </form>

            <button onclick="location.href='/home'" type="button">Go home</button>
          </form>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Include Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="captcha.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
      integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <script>
      let captcha;
      function generate() {

        // Clear old input
        document.getElementById("submit-captcha").value = "";

        // Access the element to store
        // the generated captcha
        captcha = document.getElementById("image");
        let uniquechar = "";

        const randomchar =
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

        // Generate captcha for length of
        // 5 with random character
        for (let i = 1; i < 5; i++) {
          uniquechar += randomchar.charAt(
            Math.random() * randomchar.length)
        }

        // Store generated input
        captcha.innerHTML = uniquechar;
      }

      function printmsg() {
        const user_input = document
          .getElementById("submit-captcha").value;

        // Check whether the input is equal
        // to generated captcha or not
        if (user_input == captcha.innerHTML) {
          let s = document.getElementById("key")
            .innerHTML = "Matched";
          generate();
        }
        else {
          let s = document.getElementById("key")
            .innerHTML = "not Matched";
          generate();
        }
      }

    </script>
  </body>

  </html>
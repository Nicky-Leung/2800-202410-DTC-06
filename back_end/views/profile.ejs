<%- include ('templates/header') %>
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <body class="px-4">
    <div class="d-flex flex-column align-items-center text-center mb-12 h-100">
      <div class="card-body d-flex flex-column align-items-center bg-sky-blue shadow-md p-5 rounded-b-3xl">
        <h1 class="text-4xl p-2 pt-0">
          <%= name %>
        </h1>
        <div class="profile-pic-container">
          <img src="<%= profilePicture %>" alt="pic goes here" class="profile-pic border-[3px] border-black"
            style="border-radius: 50%; width: 150px; height: 150px;">

          <div
            class="absolute -bottom-6 left-1/2 -translate-x-1/2 
          bg-[#0000FF] border-[3px] p-[10px] border-black flex items-center justify-center text-center rounded-full rounded-[25%]">
            <p style="color:white" class="ranking text-lg">
              <%= rank %>
            </p>
          </div>
        </div>
        <p class="mmr mt-4 text-xl">MMR: <%= elo %>
        </p>
        <div id="rating" class="text-xl mb-3">
          <p>Sportsmanship: <%= sportsmanship %>/500</p>
        </div>
        <p class="lead text-lg">
          <%= bio %>
        </p>
        <button class="m-4 p-2 bg-baby-blue rounded-lg" onclick="location.href='/editProfile'" type="button">Edit
          Profile
          <i class="fas fa-edit"></i> </button>

        <div class="flex justify-evenly bg-baby-blue rounded-full p-2">
          <button class="btn btn-primary" onclick="location.href='/logout'" type="button">
            <i class="fas fa-sign-out pr-1.5"></i>Log out</button>
          <button class="btn btn-primary btn-small" onclick="location.href='/addFriends'">
            <i class="fas fa-users pr-1.5"></i> Friends</button>
          <button class="btn btn-primary btn-small" onclick="location.href='/settings'">
            <i class="fas fa-cog pr-1.5"></i>Settings</button>
          <button class="btn btn-primary btn-small" onclick="location.href='/searchFriends'">
            <i class="fas fa-search pr-1.5"></i>Search</button>
        </div>
      </div>


      <div id="match-history" class="text-2xl p-2 text-center">
        Match History:

        <% for( let index=0; index < matchHistory.length; index++ ) { %>
          <div class=" flex bg-gray-50 border-2 shadow-md rounded-xl flex-row text-center items-center">
            <div class="text-center">


              <% /** * Finds the result of the match and displays it as a win or loss * Generated by AI copilot *
                @author https://github.com/copilot */ let result=matchHistory[index].result; let
                resultText=result==='win' ? 'Win' : 'Loss' ; %>

                <% if (result==='win' ) { %>
                  <div class="bg-green-500 text-white rounded-full px-5 py-2">
                    <%= resultText %>
                  </div>
                  <% } else { %>
                    <div class="bg-red-500 text-white rounded-full px-5 py-2">
                      <%= resultText %>
                    </div>
                    <% } %>

            </div>
            <!-- match type-->
            <div class="flex-col w-1/4 text-sm">
              <div>
                <% let sport=matchHistory[index].sport; let capitalizedSport=sport.charAt(0).toUpperCase() +
                  sport.slice(1); %>
                  <%= capitalizedSport %>
              </div>
              <div>

                <%= matchHistory[index].matchType %>
              </div>
            </div>
            <!-- location -->
            <div class="flex-col w-1/4 text-sm">
              <div>
                <% %>
                  <%= matchHistory[index].location.name %>
              </div>
              <div>
                <% let date=new Date(matchHistory[index].time); let formattedDate=date.getFullYear() + '-' +
                  (date.getMonth() + 1) + '-' + date.getDate(); %>
                  <%= formattedDate %>
              </div>
            </div>

            <!-- win or lose -->

            <!-- score -->
            <div>

              <p class="text-xl ml-5">
                <%= matchHistory[index].homeScore %> - <%= matchHistory[index].awayScore %>
              </p>



            </div>
          </div>

          <% } %>


      </div>


      <div id="easter-egg" class="easter-egg">
        <img src="/images/lebron.jpeg" alt="lebron" style="width: 50vw; height: 30vh;">
      </div>
    </div>

    <%- include ('templates/footer') %>

      <!-- Include jQuery -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <!-- Include Bootstrap JS -->
      <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->

      <script>
        console.log('Script loaded');

        let keysPressed = {};

        document.addEventListener('keydown', function (event) {
          keysPressed[event.key.toLowerCase()] = true;
          console.log('Keys pressed:', keysPressed); // Add this line for debugging

          if (keysPressed['*']) {
            console.log('Easter egg condition met'); // Add this line for debugging
            showEasterEgg();
          }
        });

        document.addEventListener('keyup', function (event) {
          keysPressed[event.key.toLowerCase()] = false;
          console.log('Keys released:', keysPressed); // Add this line for debugging
        });

        function showEasterEgg() {
          console.log('Showing Easter egg');
          const easterEgg = document.getElementById('easter-egg');
          easterEgg.style.display = 'block';

          setTimeout(() => {
            easterEgg.style.display = 'none';
          }, 5000);
        }

      </script>


  </body>

  <style>
    .profile-pic-container {
      position: relative;
      width: 150px;
      height: 150px;
      margin: auto;
      margin-bottom: 28px;
    }

    .profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }


    @keyframes bounce {
      0% {
        transform: translate(-50%, -50%) scale(1);
      }

      25% {
        transform: translate(-50%, -50%) translateY(-20px) scale(1.1);
      }

      50% {
        transform: translate(-50%, -50%) translateY(0) scale(1);
      }

      75% {
        transform: translate(-50%, -50%) translateY(20px) scale(1.1);
      }

      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes spin {
      0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
      }

      100% {
        transform: translate(-50%, -50%) scale(0.1) rotate(360deg);
      }
    }

    .easter-egg {
      display: none;
      padding: 20px;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      animation: bounce 0.5s ease-in-out infinite, spin 3s linear infinite;
    }
  </style>

  </html>